{"tags":[{"name":"elasticsearch","permalink":"http://catlittlechen.com/tags/elasticsearch/","url":"/async/tags/elasticsearch.json","count":6},{"name":"学习","permalink":"http://catlittlechen.com/tags/学习/","url":"/async/tags/学习.json","count":6}],"categories":[{"name":"elasticsearch","permalink":"http://catlittlechen.com/categories/elasticsearch/","url":"/async/categories/elasticsearch.json","count":6}],"url":"/async/posts/2016/08/01/es1.json","date":1470050781000,"path":{"year":2016,"month":8,"day":1,"name":"es1"},"title":"elasticsearch系列笔记(一) 基础知识","permalink":"http://catlittlechen.com/2016/08/01/es1/","content":"<h3 id=\"install\"><a href=\"#install\" class=\"headerlink\" title=\"install\"></a>install</h3><pre><code>启动docker\ndocker run -ti --name es -p 9200:9200 ubuntu:14.04 /bin/bash\n\n更新系统\napt-get update\napt-get upgrade\napt-get install software-properties-common\n\n安装java\nadd-apt-repository ppa:webupd8team/java\napt-get update\napt-get install oracle-java8-installer\n\n安装es\nwget -qO - https://packages.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -\necho &quot;deb https://packages.elastic.co/elasticsearch/2.x/debian stable main&quot; &gt;&gt; /etc/apt/sources.list\napt-get update &amp;&amp; apt-get install elasticsearch\nupdate-rc.d elasticsearch defaults 95 10\n/etc/init.d/elasticsearch start\n</code></pre><h3 id=\"test\"><a href=\"#test\" class=\"headerlink\" title=\"test\"></a>test</h3><pre><code>curl -X GET &apos;http://172.17.0.2:9200&apos;\n</code></pre><h3 id=\"install_marvel\"><a href=\"#install_marvel\" class=\"headerlink\" title=\"install marvel\"></a>install marvel</h3><pre><code>/usr/share/elasticsearch/bin/plugin -i elasticsearch/marvel/latest\n/etc/init.d/elasticsearch restart\n</code></pre><h3 id=\"api\"><a href=\"#api\" class=\"headerlink\" title=\"api\"></a>api</h3><pre><code>curl -X&lt;VERB&gt; &apos;&lt;PROTOCOL&gt;://&lt;HOST&gt;:&lt;PORT&gt;/&lt;PATH&gt;?&lt;QUERY_STRING&gt;&apos; -d &apos;&lt;BODY&gt;&apos;\nexample :\n    curl -XGET &apos;http://172.17.0.2:9200/_count?pretty&apos; -d &apos;\n        {\n            &quot;query&quot;: {\n                &quot;match_all&quot;: {}\n            }\n        }\n    &apos;\n    curl -XPUT &apos;http://172.17.0.2:9200/megacorp/employee/1?pretty&apos; -d &apos;\n        {\n            &quot;first_name&quot; : &quot;John&quot;,\n            &quot;last_name&quot; :  &quot;Smith&quot;,\n            &quot;age&quot; :        25,\n            &quot;about&quot; :      &quot;I love to go rock climbing&quot;,\n            &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]\n        }\n    &apos;\n    curl -XGET &apos;http://172.17.0.2:9200/megacorp/employee/1?pretty&apos;\n    curl -XGET &apos;http://172.17.0.2:9200/megacorp/employee/_search?pretty&apos;\n    curl -XGET &apos;http://172.17.0.2:9200/megacorp/employee/_search?pretty&amp;q=last_name:Smith&apos;\n    curl -XGET &apos;http://172.17.0.2:9200/megacorp/employee/_search?pretty&apos; -d &apos;\n        {\n            &quot;query&quot;: {\n                &quot;match&quot;: {\n                    &quot;last_name&quot;: &quot;Smith&quot;\n                    }\n                }\n            }\n    &apos;\n    curl -XGET &apos;http://172.17.0.2:9200/megacorp/employee/_search?pretty&apos; -d &apos;\n        {\n            &quot;query&quot;: {\n                &quot;filtered&quot;: {\n                    &quot;filter&quot;: {\n                        &quot;range&quot;: {\n                            &quot;age&quot;: { &quot;gt&quot;: 20 }\n                        }\n                    },\n                    &quot;query&quot;: {\n                        &quot;match&quot;: {\n                            &quot;last_name&quot;: &quot;Smith&quot;\n                        }\n                    }\n                }\n            }\n        }\n    &apos;\n    curl -XGET &apos;http://172.17.0.2:9200/megacorp/employee/_search?pretty&apos; -d &apos;\n        {\n            &quot;query&quot; : {\n                &quot;match&quot; : {\n                    &quot;about&quot; : &quot;rock climbing&quot;\n                }\n            }\n        }\n    &apos;\n    curl -XGET &apos;http://172.17.0.2:9200/megacorp/employee/_search?pretty&apos; -d &apos;\n        {\n            &quot;query&quot; : {\n                &quot;match_phrase&quot; : {\n                    &quot;about&quot; : &quot;rock climbing&quot;\n                }\n            }\n        }\n    &apos;\n    curl -XGET &apos;http://172.17.0.2:9200/megacorp/employee/_search?pretty&apos; -d &apos;\n        {\n            &quot;query&quot; : {\n                &quot;match_phrase&quot; : {\n                    &quot;about&quot; : &quot;rock climbing&quot;\n                }\n            },\n            &quot;highlight&quot;: {\n                &quot;fields&quot;: {\n                    &quot;about&quot;: {}\n                }\n            }\n        }\n    &apos;\n    curl -XGET &apos;http://172.17.0.2:9200/megacorp/employee/_search?pretty&apos; -d &apos;\n        {\n            &quot;aggs&quot;: {\n                &quot;all_interests&quot;: {\n                    &quot;terms&quot;: { &quot;field&quot;: &quot;interests&quot; }\n                }\n            }\n        }\n    &apos;\n</code></pre>"}