{"tags":[{"name":"踩坑日记","permalink":"https://catlittlechen.com/tags/踩坑日记/","url":"/async/tags/踩坑日记.json","count":11},{"name":"ganglia","permalink":"https://catlittlechen.com/tags/ganglia/","url":"/async/tags/ganglia.json","count":2}],"categories":[{"name":"踩坑日记","permalink":"https://catlittlechen.com/categories/踩坑日记/","url":"/async/categories/踩坑日记.json","count":4}],"url":"/async/posts/2017/07/10/ganglia-buffer.json","date":1499684638000,"path":{"year":2017,"month":7,"day":10,"name":"ganglia-buffer"},"title":"ganglia-buffer","permalink":"https://catlittlechen.com/2017/07/10/ganglia-buffer/","content":"<p>最近给服务器的redis-cluster加ganglia监控，但是配置加载之后，ganglia却失控了．面板上面ganglia部分数据无法显示．debug的时候，发现ganglia-monitor可以正常的收集数据，那么问题出在哪里呢？</p>\n<h2 id=\"etc-ganglia-gmond-conf\"><a href=\"#etc-ganglia-gmond-conf\" class=\"headerlink\" title=\"/etc/ganglia/gmond.conf\"></a>/etc/ganglia/gmond.conf</h2><figure class=\"highlight routeros\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">udp_recv_channel &#123;</span><br><span class=\"line\">   <span class=\"built_in\"> port </span>= 8649</span><br><span class=\"line\">    bind = ***.***.***.***</span><br><span class=\"line\">    retry_bind = <span class=\"literal\">true</span></span><br><span class=\"line\">    # Size of the UDP buffer. <span class=\"keyword\">If</span> you are handling lots of metrics you really # should bump it up <span class=\"keyword\">to</span> e.g. 10MB <span class=\"keyword\">or</span> even higher.</span><br><span class=\"line\">    buffer = 10485760</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>gmond默认的配置文件里面并没有写上这行配置，所以很多人都会忽略掉．</p>\n<h2 id=\"结果\"><a href=\"#结果\" class=\"headerlink\" title=\"结果\"></a>结果</h2><p>修改buffer大小就可以啦．</p>\n<h2 id=\"Done\"><a href=\"#Done\" class=\"headerlink\" title=\"Done\"></a>Done</h2>"}